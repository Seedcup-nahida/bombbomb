# 点石·种子杯 - 创新性软件编程PK赛
队伍： 纳西妲说的都队
项目链接： <https://github.com/Seedcup-nahida/bombbomb>

## 代码说明
运行环境： python3.11
`base.py` `config.py` `req.py` `resp.py` 为种子杯示例代码，负责底层通信，未修改。
`main.py` 为主程序，负责逻辑处理。
`bot.py` 为 bot 更新部分，负责与服务器通信，调用 main.py 中的函数。
`bot_base.py` 为 bot_base 类，负责抽象 bot 的基本逻辑行为。
`self_help.py` 为自救模块，负责判断危险并逃跑。
`value.py` 为价值模块，负责判断价值并前往。（同时包含了放炸弹的逻辑）（shi山

## 流程
按整体优先级顺序： 
### 阶段判断（level）：
初始level = 1，可破坏障碍破坏90%后赋值为 2
#### 自救模块（self_help)：
1. scan_danger函数：返回 len<=2 的行动列表，如果判断当前处于危险状态则选择最优路径跑路。
2. scan_map_danger函数：返回二维列表danger，初始化为0，标记每个位置的危险值danger（>0时越
小越危险）。对于炸弹：炸弹爆炸范围的每个位置的 danger 为 time（注）。因为time按倒计时五回
合算，故可能为零，因此 danger = max{1, time}。对于敌人：如果敌人无敌，则无敌敌人一回合内能
到达的地方标记为1 。特别地，如果同一位置出现不同标记，取最小值。
3. flag_enemy：实现2中“对于敌人”部分
4. flag_bomb：实现2中“对于炸弹”部分
5. run函数：如果自身所处格danger != 0，寻找到达danger = 0区域的最短路径并开始逃跑。如果判断
无法在倒计时结束前逃离，那么优先按照 danger 总和最大的路径逃跑。
注：time 为： 5 - 炸弹已存在时间

#### 价值模块（value）：
1. scan_value函数：先形成价值地图 map_value 标记每点价值。判断当前位置是否放置炸弹，如果不
用则前往周围价值最大的点。
2. mark_value函数：标记map_value。具体思路为每一个道具按照当前情况计算出初始价值 init_value
，则该道具所在位置标记为 init_value。从该道具往外宽搜，离道具步数（注）越多的位置分数越
小，逐步递减。若有重复，同一个位置取标记的最大值。除此之外，可破坏障碍的周围一圈会 value
+ 10。
3. put_bomb函数：判断是否放置炸弹。如果爆炸范围有足够多的可破坏障碍，或者爆炸后附近的 value
可以有很大的提升，就放炸弹。
4. move函数：如果有剩余操作次数，且上下左右有安全格子，则前往分数更高的格子，若最高分相同
则：（level=1）远离敌人，（level=2）靠近敌人。
5. init_value函数：输入道具类型和场上情况，按照一定规则，给出初始（最大）价值
6. get_distance函数：给出两个位置，计算中间隔了多少步，如果无法则到达返回-1 。在init_value 中
有所使用。注：步数指走到该道具需要多少步，因为可能需要绕路，故不等于距离

**TODO：**代码还有很多未完善的部分。